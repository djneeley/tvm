<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->  
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <link rel="stylesheet" href="styles.css">
    <script src="tvm.js"></script>
    
    <title>TVM Guru</title>
  </head>
  <body>
    <div class="container">
        
    <div>
        <h1 class="display-4">
            Retirement Income Calculator
            <small class="text-muted">Advanced</small>
        </h1>
        <p>Use this calculator to estimate income in retirement based on current accumulated savings, future monthly savings, and other assumptions.</p>
    </div>

    <div class="sticky-top bg-white pb-2">
        <div class="row">
            <div class="col">
                <h5>Results:</h5>
                <p>Based on the information and assumptions below, a person could generate retirement income of about <strong>$<span id="firstYear">0</span></strong> in the first year and <strong>$<span id="lastYear">0</span></strong> in the last year of retirement (expressed in the value of today's dollars).</p>
            </div>
        </div>
    </div>
    <div class="card mb-3">
        <div class="card-body">
    <div class="row">
        <div class="col">
            <h5>How much is saved for retirement?</h5>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6 mb-6">
            <h6>Current Savings</h6>
            <p class="lead">$<span id="currentSavingsLabel">0</span></p>
            <div class="slidecontainer">
                <input type="range" id="currentSavings" min="0" max="280" step="1" value="0" oninput="updateResult()" class="slider">
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Years to Retirement</h6>
            <p class="lead"><span id="yearsToRetirementLabel">0</span> years</p>
            <div class="slidecontainer">
                <input type="range" id="yearsToRetirement" min="0" max="50" step="1" value="0" oninput="updateResult()" class="slider">
            </div>
        </div>
        <div class="col-md-3 mb-3" id="preRetirementReturnDiv">
            <h6>Return Before Retirement</h6>
            <p class="lead"><span id="preRetirementReturnLabel">8</span>% per year</p>
            <div class="slidecontainer">
                <input type="range" id="preRetirementReturn" min="0" max="12" step="0.25" value="0" oninput="updateResult()" class="slider">
            </div>
        </div>
    </div>
        </div>
    </div>
    <div class="card mb-3" id="additionalSavingsDiv">
        <div class="card-body">
    <div class="row">
        <div class="col">
            <h5>How much more will be saved for retirement?</h5>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 mb-3">
            <h6>Savings in Year 1</h6>
            <p class="lead">$<span id="monthlySavingsLabel">1000</span> per month</p>
            <div class="slidecontainer">
                <input type="range" id="monthlySavings" min="0" max="10000" step="50"  value="0" oninput="updateResult()" class="slider">
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Savings Increase</h6>
            <p class="lead"><span id="savingsIncreaseLabel">3</span>% per year</p>
            <div class="slidecontainer">
                <input type="range" id="savingsIncrease" min="0" max="10" step="0.25" value="0" oninput="updateResult()" class="slider">
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Savings in Year <span id="savingsYearNumber">0</span></h6>
            <p class="lead">$<span id="finalMonthlySavingsLabel">1000</span> per month</p>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Additional Saved</h6>
            <p class="lead">$<span id="additionalSaved">0</span></p>
        </div>
    </div>
        </div>
    </div>
    <div class="card mb-3">
        <div class="card-body">
    <div class="row">
        <div class="col">
            <h5>How much income could be generated in retirement?</h5>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 mb-3">
            <h6>Savings at Retirement</h6>
            <div class="row">
                <div class="col-8">
                    <p class="lead">$<span id="savingsAtRetirement">0</span></p>
                </div>
                <div class="col-4-lg text-right">
                    <label class="switch">
                      <input type="checkbox" checked id="savingsAtRetirementPV" onchange="updateResult()">
                      <span class="knob round"></span>
                    </label>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Withdrawal Method</h6>
            <select class="form-control" id="withdrawalMethod" onchange="updateResult()">
                <option>Growing Annuity</option>
                <option>Fixed Dollar</option>
                <option>Fixed Percentage</option>
                <option>Specified Death Benefit</option>
                <option>Capital Preservation</option>
                <option>Growing Perpetuity</option>
                <option>No Income</option>
            </select>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Years in Retirement</h6>
            <p class="lead"><span id="yearsInRetirementLabel">30</span> years</p>
            <div class="slidecontainer">
                <input type="range" id="yearsInRetirement" min="1" max="50" step="1" value="30" oninput="updateResult()" class="slider">
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Return During Retirement</h6>
            <p class="lead"><span id="postRetirementReturnLabel">6</span>% per year</p>
            <div class="slidecontainer">
                <input type="range" id="postRetirementReturn" min="0" max="12" step="0.25" value="0" oninput="updateResult()" class="slider">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 mb-3">
            <h6>Inflation Rate</h6>
            <p class="lead"><span id="inflationRateLabel">3</span>% per year</p>
            <div class="slidecontainer">
                <input type="range" id="inflationRate" min="0" max="5" step="0.25" value="3" oninput="updateResult()" class="slider">
            </div>
        </div>
        <div class="col-md-3 mb-3" id="fixedDollarRateDiv">
            <h6>Fixed Dollar Rate</h6>
            <p class="lead"><span id="fixedDollarRateLabel">4</span>% per year</p>
            <div class="slidecontainer">
                <input type="range" id="fixedDollarRate" min="0" max="12" step="0.1" value="4" oninput="updateResult()" class="slider">
            </div>
        </div>
        <div class="col-md-3 mb-3" id="fixedPercentageRateDiv">
            <h6>Fixed Percentage Rate</h6>
            <p class="lead"><span id="fixedPercentageRateLabel">6</span>% per year</p>
            <div class="slidecontainer">
                <input type="range" id="fixedPercentageRate" min="0" max="12" step="0.1" value="6" oninput="updateResult()" class="slider">
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Withdrawal Rate in Year 1</h6>
            <p class="lead"><span id="withdrawalRate">0.00</span>%</p>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 mb-3">
            <h6>Income in Year 1</h6>
            <div class="row">
                <div class="col-8">
                    <p class="lead">$<span id="retirementIncome">0</span></p>
                </div>
                <div class="col-4-lg text-right">
                    <label class="switch">
                      <input type="checkbox" id="retirementIncomePV" onchange="updateResult()">
                      <span class="knob round"></span>
                    </label>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Income in Year <span id="yearNumber">30</span></h6>
            <div class="row">
                <div class="col-8">
                    <p class="lead">$<span id="finalRetirementIncome">0</span></p>
                </div>
                <div class="col-4-lg text-right">
                    <label class="switch">
                      <input type="checkbox" id="finalRetirementIncomePV" onchange="updateResult()">
                      <span class="knob round"></span>
                    </label>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Total Withdrawals</h6>
            <p class="lead">$<span id="totalWithdrawalsLabel">0</span></p>
        </div>
        <div class="col-md-3 mb-3">
            <h6>Value at Death</h6>
            <div class="row">
                <div class="col-8">
                    <p class="lead">$<span id="valueAtDeathLabel">0</span></p>
                </div>
                <div class="col-4-lg text-right">
                    <label class="switch">
                      <input type="checkbox" checked id="valueAtDeathPV" onchange="updateResult()">
                      <span class="knob round"></span>
                    </label>
                </div>
            </div>
            <div class="slidecontainer">
                <input type="range" id="valueAtDeath" min="0" max="2000000" step="5000" value="0" oninput="updateResult()" class="slider">
            </div>
        </div>
    </div>
        </div>
    </div>
    <div>
        <div class="row">
            <div class="col">
                <h5>Disclaimer:</h5>
                <p>This projection is for illustrative purposes only and is the result of the underlying assumptions.  Actual results will vary. There is no guarantee of future results.  Many other factors can affect retirement income, including taxation and the sequence of returns.  Please consult with your financial advisor to develop an investment strategy to meet your specific needs.</p>
                <p><a href="https://tvm.guru">TVM.Guru</a> is a service of <a href="http://www.harolddance.com" target="_blank">Harold Dance Investments</a>, a broker-dealer and investment advisor registered in Utah and Idaho. If you have questions about how to use the calculator above or how to interpret its results, please send an email to <a href="mailto: advisor@harolddance.com" target="_blank">advisor@harolddance.com</a>.</p>
                <p>&copy; Harold Dance Investments</p>
            </div>
        </div>
    </div>
    </div>

    <script language="javascript" type="text/javascript">
      updateResult();

      function updateResult()
      {
        disableInputs();
        var currentSavings = document.querySelector('#currentSavings');
        var currentSavingsValue = 0;
        if (currentSavings.value < 101)
            {
                currentSavingsValue = 1000 * currentSavings.value;
            }
        else if (currentSavings.value < 191)
            {
                currentSavingsValue = (currentSavings.value-100)*10000+100000;
            }
        else
            {
                currentSavingsValue = (currentSavings.value-190)*100000+1000000;
            }
        document.querySelector('#currentSavingsLabel').textContent = currentSavingsValue.formatMoney(0);
        var monthlySavings = document.querySelector('#monthlySavings');
        document.querySelector('#monthlySavingsLabel').textContent = (Number(monthlySavings.value)).formatMoney(0);
        var savingsIncrease = document.querySelector('#savingsIncrease');
        document.querySelector('#savingsIncreaseLabel').textContent = (Number(savingsIncrease.value)).formatMoney(2);
        var preRetirementReturn = document.querySelector('#preRetirementReturn');
        document.querySelector('#preRetirementReturnLabel').textContent = (Number(preRetirementReturn.value)).formatMoney(2);
        var postRetirementReturn = document.querySelector('#postRetirementReturn');
        var inflationRate = document.querySelector('#inflationRate');
        document.querySelector('#inflationRateLabel').textContent = (Number(inflationRate.value)).formatMoney(2);
        var yearsToRetirement = document.querySelector('#yearsToRetirement');
        document.querySelector('#finalMonthlySavingsLabel').textContent = (FVPresentSum(Number(monthlySavings.value),Number(yearsToRetirement.value),Number(savingsIncrease.value)/100)).formatMoney(0);
        document.querySelector('#yearsToRetirementLabel').textContent = yearsToRetirement.value;
        document.querySelector('#savingsYearNumber').textContent = yearsToRetirement.value;
        document.querySelector('#additionalSaved').textContent = (Math.round(Number(PVGrowingAnnuityDue(monthlySavings.value * 12, yearsToRetirement.value, 0, savingsIncrease.value/100))/1000)*1000).formatMoney(0);
        var yearsInRetirement = document.querySelector('#yearsInRetirement');
        document.querySelector('#yearsInRetirementLabel').textContent = yearsInRetirement.value;
        document.querySelector('#yearNumber').textContent = yearsInRetirement.value;
        var valueAtDeath = document.querySelector('#valueAtDeath').value;
        var fixedDollarRate = document.querySelector('#fixedDollarRate');
        document.querySelector('#fixedDollarRateLabel').textContent = (Number(fixedDollarRate.value)).formatMoney(1);
        var fixedPercentageRate = document.querySelector('#fixedPercentageRate');
        document.querySelector('#fixedPercentageRateLabel').textContent = (Number(fixedPercentageRate.value)).formatMoney(1);
        var withdrawalMethod = document.getElementById('withdrawalMethod').value;
        var monthlyReturn = annualToMonthly(preRetirementReturn.value/100);
        var monthlySavingsIncrease = annualToMonthly(savingsIncrease.value/100);
        var savingsAtRetirement = FVPresentSum(currentSavingsValue, yearsToRetirement.value*12,monthlyReturn) + FVGrowingAnnuity(monthlySavings.value, yearsToRetirement.value*12, monthlyReturn, monthlySavingsIncrease);
        
        if (withdrawalMethod=="Growing Perpetuity")
        {
            document.getElementById('postRetirementReturn').min = Number(inflationRate.value);
            if (Number(inflationRate.value)>Number(postRetirementReturn.value))
            {
                postRetirementReturn.value = inflationRate.value;
            }
        }
        else
        {
            document.getElementById('postRetirementReturn').min = 0;      
        }
        document.querySelector('#postRetirementReturnLabel').textContent = (Number(postRetirementReturn.value)).formatMoney(2);
          
        if (document.getElementById("savingsAtRetirementPV").checked)
        {
          document.querySelector('#savingsAtRetirement').textContent = (Math.round(savingsAtRetirement/1000)*1000).formatMoney(0);
        }
        else
        {
          document.querySelector('#savingsAtRetirement').textContent = (Math.round(PVFutureSum(savingsAtRetirement,yearsToRetirement.value,inflationRate.value/100)/1000)*1000).formatMoney(0);
        }
          
        var initialPayment = 0;
        var totalWithdrawals = 0;
        if (withdrawalMethod=="Growing Annuity")
        {
            initialPayment = RIGrowingAnnuity(savingsAtRetirement,yearsInRetirement.value,postRetirementReturn.value/100,inflationRate.value/100);
            totalWithdrawals = PVGrowingAnnuityDue(initialPayment, yearsInRetirement.value, 0, inflationRate.value/100);
            valueAtDeath = 0;
        }
        else if (withdrawalMethod=="Fixed Dollar")
        {
        	initialPayment = RIFixedDollar(savingsAtRetirement, yearsInRetirement.value, postRetirementReturn.value/100, inflationRate.value/100, fixedDollarRate.value/100);
            totalWithdrawals = PVGrowingAnnuityDue(initialPayment, yearsInRetirement.value, 0, inflationRate.value/100);
            valueAtDeath = FVPresentSum(savingsAtRetirement - PVGrowingAnnuityDue(initialPayment, yearsInRetirement.value, postRetirementReturn.value/100, inflationRate.value/100), yearsInRetirement.value, postRetirementReturn.value/100);
        }
        else if (withdrawalMethod=="Fixed Percentage")
        {
        	initialPayment = RIFixedPercentage(savingsAtRetirement, fixedPercentageRate.value/100);
            totalWithdrawals = PVGrowingAnnuityDue(initialPayment, yearsInRetirement.value, 0, ((postRetirementReturn.value/100)-(fixedPercentageRate.value/100)-((postRetirementReturn.value/100)*(fixedPercentageRate.value/100))));
            valueAtDeath = FVPresentSum(savingsAtRetirement, yearsInRetirement.value, ((postRetirementReturn.value/100)-(fixedPercentageRate.value/100)-((postRetirementReturn.value/100)*(fixedPercentageRate.value/100))));
        }
        else if (withdrawalMethod=="Specified Death Benefit")
        {
        	initialPayment = RISpecifiedDB(savingsAtRetirement, yearsInRetirement.value, postRetirementReturn.value/100, inflationRate.value/100, valueAtDeath);
            totalWithdrawals = PVGrowingAnnuityDue(initialPayment, yearsInRetirement.value, 0, inflationRate.value/100);
            // no valueAtDeath calculation needed as this is set by the user in this method
        }
        else if (withdrawalMethod=="Capital Preservation")
        {
        	initialPayment = RICapitalPreservation(savingsAtRetirement, postRetirementReturn.value/100);
            totalWithdrawals = initialPayment * yearsInRetirement.value;
            valueAtDeath = savingsAtRetirement;
        }
        else if (withdrawalMethod=="Growing Perpetuity")
        {
        	initialPayment = RIGrowingPerpetuity(savingsAtRetirement, postRetirementReturn.value/100, inflationRate.value/100);
            totalWithdrawals = PVGrowingAnnuityDue(initialPayment, yearsInRetirement.value, 0, inflationRate.value/100);
            valueAtDeath = FVPresentSum(savingsAtRetirement, yearsInRetirement.value, inflationRate.value/100);
        }
        else if (withdrawalMethod=="No Income")
        {
        	initialPayent = 0;
            totalWithdrawals = 0;
            valueAtDeath = FVPresentSum(savingsAtRetirement, yearsInRetirement.value, postRetirementReturn.value/100);
        }
        else
        {
            initialPayment = 0;
            totalWithdrawals = 0;
            valueAtDeath = 0;
        }
          
        console.log("initialPayment = " + initialPayment);
        console.log("valueAtDeath = " + valueAtDeath);
          
        if (savingsAtRetirement==0)
        {
            document.querySelector('#withdrawalRate').textContent = (0).formatMoney(2);
        }
        else
        {
            document.querySelector('#withdrawalRate').textContent = (initialPayment / savingsAtRetirement * 100).formatMoney(2);
        }

        var retirementIncome = (Math.round(PVFutureSum(initialPayment, yearsToRetirement.value, inflationRate.value/100)/1000)*1000).formatMoney(0);
        if (document.getElementById("retirementIncomePV").checked)
        {
            document.querySelector('#retirementIncome').textContent = (Math.round(initialPayment/1000)*1000).formatMoney(0);
        }
        else
        {
            document.querySelector('#retirementIncome').textContent = retirementIncome;
            
        }
        
        document.querySelector('#firstYear').textContent =  retirementIncome;
          
        if (document.getElementById("finalRetirementIncomePV").checked)
        {
          if (withdrawalMethod=="Growing Annuity")
            {
                document.querySelector('#finalRetirementIncome').textContent = (Math.round(FVPresentSum(initialPayment, yearsInRetirement.value, inflationRate.value/100)/1000)*1000).formatMoney(0);
            }
            else if (withdrawalMethod=="Fixed Dollar")
            {
                document.querySelector('#finalRetirementIncome').textContent = (Math.round(FVPresentSum(initialPayment, yearsInRetirement.value, inflationRate.value/100)/1000)*1000).formatMoney(0);
            }
            else if (withdrawalMethod=="Fixed Percentage")
            {
                document.querySelector('#finalRetirementIncome').textContent = (Math.round(FVPresentSum(savingsAtRetirement, yearsInRetirement.value-1, ((postRetirementReturn.value/100)-(fixedPercentageRate.value/100)-((postRetirementReturn.value/100)*(fixedPercentageRate.value/100))))*fixedPercentageRate.value/100/1000)*1000).formatMoney(0);
            }
            else if (withdrawalMethod=="Specified Death Benefit")
            {
                document.querySelector('#finalRetirementIncome').textContent = (Math.round(FVPresentSum(initialPayment, yearsInRetirement.value, inflationRate.value/100)/1000)*1000).formatMoney(0);
            }
            else if (withdrawalMethod=="Capital Preservation")
            {
                document.querySelector('#finalRetirementIncome').textContent = (Math.round(initialPayment/1000)*1000).formatMoney(0);
            }
            else if (withdrawalMethod=="Growing Perpetuity")
            {
                document.querySelector('#finalRetirementIncome').textContent = (Math.round(FVPresentSum(initialPayment, yearsInRetirement.value, inflationRate.value/100)/1000)*1000).formatMoney(0);
            }
            else if (withdrawalMethod=="No Income")
            {
                document.querySelector('#finalRetirementIncome').textContent = 0;
            }
        }
        else
        {
          if (withdrawalMethod=="Growing Annuity")
            {
                document.querySelector('#finalRetirementIncome').textContent = retirementIncome;
            }
            else if (withdrawalMethod=="Fixed Dollar")
            {
                document.querySelector('#finalRetirementIncome').textContent = retirementIncome;
            }
            else if (withdrawalMethod=="Fixed Percentage")
            {
                document.querySelector('#finalRetirementIncome').textContent = (Math.round(PVFutureSum(FVPresentSum(savingsAtRetirement, yearsInRetirement.value-1, ((postRetirementReturn.value/100)-(fixedPercentageRate.value/100)-((postRetirementReturn.value/100)*(fixedPercentageRate.value/100))))*fixedPercentageRate.value/100,yearsInRetirement.value-1+Number(yearsToRetirement.value),inflationRate.value/100)/1000)*1000).formatMoney(0);
            }
            else if (withdrawalMethod=="Specified Death Benefit")
            {
                document.querySelector('#finalRetirementIncome').textContent = retirementIncome;
            }
            else if (withdrawalMethod=="Capital Preservation")
            {
                document.querySelector('#finalRetirementIncome').textContent = (Math.round(PVFutureSum(initialPayment,yearsInRetirement.value-1+Number(yearsToRetirement.value),inflationRate.value/100)/1000)*1000).formatMoney(0);
            }
            else if (withdrawalMethod=="Growing Perpetuity")
            {
                document.querySelector('#finalRetirementIncome').textContent = retirementIncome;
            }
            else if (withdrawalMethod=="No Income")
            {
                document.querySelector('#finalRetirementIncome').textContent = 0;
            }
        }
        if (withdrawalMethod=="Growing Annuity")
        {
            document.querySelector('#lastYear').textContent = retirementIncome;
        }
        else if (withdrawalMethod=="Fixed Dollar")
        {
            document.querySelector('#lastYear').textContent = retirementIncome;
        }
        else if (withdrawalMethod=="Fixed Percentage")
        {
            document.querySelector('#lastYear').textContent = (Math.round(PVFutureSum(FVPresentSum(savingsAtRetirement, yearsInRetirement.value-1, ((postRetirementReturn.value/100)-(fixedPercentageRate.value/100)-((postRetirementReturn.value/100)*(fixedPercentageRate.value/100))))*fixedPercentageRate.value/100,yearsInRetirement.value-1+Number(yearsToRetirement.value),inflationRate.value/100)/1000)*1000).formatMoney(0);
        }
        else if (withdrawalMethod=="Specified Death Benefit")
        {
            document.querySelector('#lastYear').textContent = retirementIncome;
        }
        else if (withdrawalMethod=="Capital Preservation")
        {
            document.querySelector('#lastYear').textContent = (Math.round(PVFutureSum(initialPayment,yearsInRetirement.value-1+Number(yearsToRetirement.value),inflationRate.value/100)/1000)*1000).formatMoney(0);
        }
        else if (withdrawalMethod=="Growing Perpetuity")
        {
            document.querySelector('#lastYear').textContent = retirementIncome;
        }
        else if (withdrawalMethod=="No Income")
        {
            document.querySelector('#lastYear').textContent = 0;
        }
        document.querySelector('#totalWithdrawalsLabel').textContent = (Math.round(Number(totalWithdrawals)/1000)*1000).formatMoney(0);
        if (document.getElementById("valueAtDeathPV").checked)
        {
            document.querySelector('#valueAtDeathLabel').textContent = (Math.round(valueAtDeath/1000)*1000).formatMoney(0);
        }
        else
        {
            document.querySelector('#valueAtDeathLabel').textContent = (Math.round(PVFutureSum(valueAtDeath,parseFloat(yearsToRetirement.value)+parseFloat(yearsInRetirement.value),inflationRate.value/100)/1000)*1000).formatMoney(0);
        }
        document.getElementById('fixedDollarRate').max = RIGrowingAnnuity(savingsAtRetirement,yearsInRetirement.value,postRetirementReturn.value/100,inflationRate.value/100) / savingsAtRetirement * 100;
        document.getElementById('valueAtDeath').max = FVPresentSum(savingsAtRetirement, yearsInRetirement.value, postRetirementReturn.value/100);
        return;
      }
        
      function disableInputs()
      {
        var yearsToRetirement = document.querySelector('#yearsToRetirement');
        if (yearsToRetirement.value==0)
        {
            document.getElementById("preRetirementReturnDiv").style.color = "#d3d3d3";
            document.getElementById("preRetirementReturn").disabled = true;
            document.getElementById("additionalSavingsDiv").style.color = "#d3d3d3";
            document.getElementById("monthlySavings").disabled = true;
            document.getElementById("savingsIncrease").disabled = true;
        }
        else
        {
            document.getElementById("preRetirementReturnDiv").style.color = "#000000";
            document.getElementById("preRetirementReturn").disabled = false;
            document.getElementById("additionalSavingsDiv").style.color = "#000000";
            document.getElementById("monthlySavings").disabled = false;
            document.getElementById("savingsIncrease").disabled = false;
        }
        var withdrawalMethod = document.getElementById('withdrawalMethod').value;
        if (withdrawalMethod=="Growing Annuity")
        {
            document.getElementById("fixedDollarRate").disabled = true;
            document.getElementById("fixedDollarRateDiv").style.color = "#d3d3d3";
            document.getElementById("fixedPercentageRate").disabled = true;
            document.getElementById("fixedPercentageRateDiv").style.color = "#d3d3d3";
            document.getElementById("valueAtDeath").disabled = true;
        }
        else if (withdrawalMethod=="Fixed Dollar")
        {
            document.getElementById("fixedDollarRate").disabled = false;
            document.getElementById("fixedDollarRateDiv").style.color = "#000000";
            document.getElementById("fixedPercentageRate").disabled = true;
            document.getElementById("fixedPercentageRateDiv").style.color = "#d3d3d3";
            document.getElementById("valueAtDeath").disabled = true;
        }
        else if (withdrawalMethod=="Fixed Percentage")
        {
        	document.getElementById("fixedDollarRate").disabled = true;
            document.getElementById("fixedDollarRateDiv").style.color = "#d3d3d3";
            document.getElementById("fixedPercentageRate").disabled = false;
            document.getElementById("fixedPercentageRateDiv").style.color = "#000000";
            document.getElementById("valueAtDeath").disabled = true;
        }
        else if (withdrawalMethod=="Specified Death Benefit")
        {
        	document.getElementById("fixedDollarRate").disabled = true;
            document.getElementById("fixedDollarRateDiv").style.color = "#d3d3d3";
            document.getElementById("fixedPercentageRate").disabled = true;
            document.getElementById("fixedPercentageRateDiv").style.color = "#d3d3d3";
            document.getElementById("valueAtDeath").disabled = false;
        }
        else if (withdrawalMethod=="Capital Preservation")
        {
        	document.getElementById("fixedDollarRate").disabled = true;
            document.getElementById("fixedDollarRateDiv").style.color = "#d3d3d3";
            document.getElementById("fixedPercentageRate").disabled = true;
            document.getElementById("fixedPercentageRateDiv").style.color = "#d3d3d3";
            document.getElementById("valueAtDeath").disabled = true;
        }
        else if (withdrawalMethod=="Growing Perpetuity")
        {
        	document.getElementById("fixedDollarRate").disabled = true;
            document.getElementById("fixedDollarRateDiv").style.color = "#d3d3d3";
            document.getElementById("fixedPercentageRate").disabled = true;
            document.getElementById("fixedPercentageRateDiv").style.color = "#d3d3d3";
            document.getElementById("valueAtDeath").disabled = true;
        }
        else if (withdrawalMethod=="No Income")
        {
        	document.getElementById("fixedDollarRate").disabled = true;
            document.getElementById("fixedDollarRateDiv").style.color = "#d3d3d3";
            document.getElementById("fixedPercentageRate").disabled = true;
            document.getElementById("fixedPercentageRateDiv").style.color = "#d3d3d3";
            document.getElementById("valueAtDeath").disabled = true;
        }
        else
        {
            document.getElementById("fixedDollarRate").disabled = true;
            document.getElementById("fixedDollarRateDiv").style.color = "#d3d3d3";
            document.getElementById("fixedPercentageRate").disabled = true;
            document.getElementById("fixedPercentageRateDiv").style.color = "#d3d3d3";
            document.getElementById("valueAtDeath").disabled = true;
        }
      }
    </script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
      
  </body>
</html>
